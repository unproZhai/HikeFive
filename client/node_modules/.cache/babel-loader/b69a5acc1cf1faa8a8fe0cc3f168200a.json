{"ast":null,"code":"import _classCallCheck from \"/Users/xinshuangzhai/Desktop/HikeFive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/xinshuangzhai/Desktop/HikeFive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/xinshuangzhai/Desktop/HikeFive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/xinshuangzhai/Desktop/HikeFive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/xinshuangzhai/Desktop/HikeFive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/xinshuangzhai/Desktop/HikeFive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/xinshuangzhai/Desktop/HikeFive/client/src/components/post/user-posts/Main-Components/PersonPostItem.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport { Link } from 'react-router-dom';\nimport { deletePersonalPost, addPersonalLike, removePersonalLike } from '../../../../actions/postActions';\nimport PersonCommentWindow from '../Sub-Components/PersonCommentWindow';\nimport PersonCommentFeed from './PersonCommentFeed';\nimport PersonCommentWindowForm from '../Sub-Components/PersonCommentWindowForm';\nimport defaultAvatar from '../../../../img/defaultAvatar.jpg';\n\nvar PersonPostItem =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PersonPostItem, _React$Component);\n\n  function PersonPostItem() {\n    var _this;\n\n    _classCallCheck(this, PersonPostItem);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PersonPostItem).call(this));\n    _this.state = {\n      showReply: false,\n      updated: false\n    };\n    _this.updateLikes = _this.updateLikes.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.findUserLike = _this.findUserLike.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(PersonPostItem, [{\n    key: \"updateLikes\",\n    value: function updateLikes(id) {\n      var post = this.props.post;\n\n      if (this.findUserLike(post.likes)) {\n        if (!this.state.updated) {\n          post.likes.length = post.likes.length - 1;\n          this.props.removePersonalLike(id);\n          this.setState(function () {\n            return {\n              updated: false\n            };\n          });\n        } else {\n          this.props.addPersonalLike(id);\n          post.likes.length = post.likes.length + 1;\n          this.setState(function () {\n            return {\n              updated: false\n            };\n          });\n        }\n      } else {\n        if (!this.state.updated) {\n          post.likes.length = post.likes.length + 1;\n          this.props.addPersonalLike(id);\n          this.setState(function () {\n            return {\n              updated: true\n            };\n          });\n        } else {\n          this.props.removePersonalLike(id);\n          post.likes.length = post.likes.length - 1;\n          this.setState(function () {\n            return {\n              updated: false\n            };\n          });\n        }\n      }\n    }\n  }, {\n    key: \"onCommentsClick\",\n    value: function onCommentsClick() {\n      this.setState({\n        showReply: !this.state.showReply\n      });\n    }\n  }, {\n    key: \"onDeleteClick\",\n    value: function onDeleteClick(id) {\n      this.props.deletePersonalPost(id);\n    }\n  }, {\n    key: \"onLikeClick\",\n    value: function onLikeClick(id, handle) {\n      var object = {\n        uid: id,\n        uhandle: handle\n      };\n      this.props.addPersonalLike(object);\n    }\n  }, {\n    key: \"findUserLike\",\n    value: function findUserLike(likes) {\n      var auth = this.props.auth;\n\n      if (likes.filter(function (like) {\n        return like.user === auth.user.id;\n      }).length > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          post = _this$props.post,\n          auth = _this$props.auth,\n          showActions = _this$props.showActions;\n      var handle = this.props.handle;\n\n      var moment = require('moment');\n\n      var formatted_date = moment(post.date).format('LLL');\n      var short_date = moment(post.date).format('LT');\n      var postAvatar;\n      var commentsContent;\n\n      if (post.comments.length <= 3) {\n        commentsContent = React.createElement(PersonCommentFeed, {\n          postId: post._id,\n          comments: post.comments,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        });\n      } else {\n        commentsContent = React.createElement(PersonCommentWindow, {\n          postId: post._id,\n          comments: post.comments,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        });\n      }\n\n      if (post.avatar === '') {\n        postAvatar = defaultAvatar;\n      } else {\n        postAvatar = post.avatar;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"d-flex card card-body mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          width: '50px',\n          height: '50px'\n        },\n        className: \"rounded-circle  d-none d-sm-block d-md-none center\",\n        src: postAvatar,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        style: {\n          width: '75px',\n          height: '75px'\n        },\n        className: \"rounded-circle  d-none d-md-block center\",\n        src: postAvatar,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"d-flex text-center justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, post.name)), React.createElement(\"div\", {\n        className: \"col-md-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"lead d-none d-sm-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, post.text), React.createElement(\"p\", {\n        className: \"lead d-block d-sm-none text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, post.text), showActions ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, post.user === auth.user.id ? React.createElement(\"button\", {\n        onClick: this.onDeleteClick.bind(this, post._id),\n        type: \"button\",\n        className: \"btn btn-sm btn-danger mr-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Delete\") : null, \" \", \" \", React.createElement(Link, {\n        to: \"/post/\".concat(handle, \"/\").concat(post._id),\n        className: \"btn btn-sm btn-light mr-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"View\"), React.createElement(\"button\", {\n        onClick: this.updateLikes.bind(this, post._id, handle),\n        type: \"button\",\n        className: \"btn btn-sm btn-light mr-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: classnames('fas fa-thumbs-up', {}),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"badge badge-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, post.likes.length)), React.createElement(\"button\", {\n        onClick: this.onCommentsClick.bind(this, post._id),\n        type: \"button\",\n        className: \"btn btn-sm btn-light mr-1 d-none d-sm-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Comments\")), this.state.showReply && commentsContent, this.state.showReply && React.createElement(PersonCommentWindowForm, {\n        postId: post._id,\n        handle: handle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"blockquote-footer bottomcorner d-none d-sm-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, formatted_date), React.createElement(\"div\", {\n        className: \"blockquote-footer bottomcorner d-block d-sm-none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, short_date)) : null)));\n    }\n  }]);\n\n  return PersonPostItem;\n}(React.Component);\n\nPersonPostItem.defaultProps = {\n  showActions: true\n};\nPersonPostItem.propTypes = {\n  deletePersonalPost: PropTypes.func.isRequired,\n  addPersonalLike: PropTypes.func.isRequired,\n  removePersonalLike: PropTypes.func.isRequired,\n  post: PropTypes.object.isRequired,\n  auth: PropTypes.object.isRequired,\n  profile: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    profile: state.profile\n  };\n};\n\nexport default connect(mapStateToProps, {\n  deletePersonalPost: deletePersonalPost,\n  addPersonalLike: addPersonalLike,\n  removePersonalLike: removePersonalLike\n})(PersonPostItem);","map":{"version":3,"sources":["/Users/xinshuangzhai/Desktop/HikeFive/client/src/components/post/user-posts/Main-Components/PersonPostItem.js"],"names":["React","PropTypes","connect","classnames","Link","deletePersonalPost","addPersonalLike","removePersonalLike","PersonCommentWindow","PersonCommentFeed","PersonCommentWindowForm","defaultAvatar","PersonPostItem","state","showReply","updated","updateLikes","bind","findUserLike","id","post","props","likes","length","setState","handle","object","uid","uhandle","auth","filter","like","user","showActions","moment","require","formatted_date","date","format","short_date","postAvatar","commentsContent","comments","_id","avatar","width","height","name","text","onDeleteClick","onCommentsClick","Component","defaultProps","propTypes","func","isRequired","profile","mapStateToProps"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,kBAAT,EAA6BC,eAA7B,EAA8CC,kBAA9C,QAAwE,iCAAxE;AACA,OAAOC,mBAAP,MAAgC,uCAAhC;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,OAAOC,uBAAP,MAAoC,2CAApC;AACA,OAAOC,aAAP,MAA0B,mCAA1B;;IAEMC,c;;;;;AACJ,4BAAc;AAAA;;AAAA;;AACZ;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,SAAS,EAAE,KADA;AAEXC,MAAAA,OAAO,EAAE;AAFE,KAAb;AAIA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,uDAAnB;AACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,uDAApB;AAPY;AAQb;;;;gCAEWE,E,EAAI;AAAA,UACNC,IADM,GACG,KAAKC,KADR,CACND,IADM;;AAEd,UAAI,KAAKF,YAAL,CAAkBE,IAAI,CAACE,KAAvB,CAAJ,EAAmC;AACjC,YAAI,CAAC,KAAKT,KAAL,CAAWE,OAAhB,EAAyB;AACvBK,UAAAA,IAAI,CAACE,KAAL,CAAWC,MAAX,GAAoBH,IAAI,CAACE,KAAL,CAAWC,MAAX,GAAoB,CAAxC;AACA,eAAKF,KAAL,CAAWd,kBAAX,CAA8BY,EAA9B;AACA,eAAKK,QAAL,CAAc,YAAM;AAClB,mBAAO;AACLT,cAAAA,OAAO,EAAE;AADJ,aAAP;AAGD,WAJD;AAKD,SARD,MAQO;AACL,eAAKM,KAAL,CAAWf,eAAX,CAA2Ba,EAA3B;AACAC,UAAAA,IAAI,CAACE,KAAL,CAAWC,MAAX,GAAoBH,IAAI,CAACE,KAAL,CAAWC,MAAX,GAAoB,CAAxC;AACA,eAAKC,QAAL,CAAc,YAAM;AAClB,mBAAO;AACLT,cAAAA,OAAO,EAAE;AADJ,aAAP;AAGD,WAJD;AAKD;AACF,OAlBD,MAmBK;AACH,YAAI,CAAC,KAAKF,KAAL,CAAWE,OAAhB,EAAyB;AACvBK,UAAAA,IAAI,CAACE,KAAL,CAAWC,MAAX,GAAoBH,IAAI,CAACE,KAAL,CAAWC,MAAX,GAAoB,CAAxC;AACA,eAAKF,KAAL,CAAWf,eAAX,CAA2Ba,EAA3B;AACA,eAAKK,QAAL,CAAc,YAAM;AAClB,mBAAO;AACLT,cAAAA,OAAO,EAAE;AADJ,aAAP;AAGD,WAJD;AAKD,SARD,MAQO;AACL,eAAKM,KAAL,CAAWd,kBAAX,CAA8BY,EAA9B;AACAC,UAAAA,IAAI,CAACE,KAAL,CAAWC,MAAX,GAAoBH,IAAI,CAACE,KAAL,CAAWC,MAAX,GAAoB,CAAxC;AACA,eAAKC,QAAL,CAAc,YAAM;AAClB,mBAAO;AACLT,cAAAA,OAAO,EAAE;AADJ,aAAP;AAGD,WAJD;AAKD;AACF;AACF;;;sCAEiB;AAChB,WAAKS,QAAL,CAAc;AAAEV,QAAAA,SAAS,EAAE,CAAC,KAAKD,KAAL,CAAWC;AAAzB,OAAd;AACD;;;kCAEaK,E,EAAI;AAChB,WAAKE,KAAL,CAAWhB,kBAAX,CAA8Bc,EAA9B;AACD;;;gCAEWA,E,EAAIM,M,EAAQ;AACtB,UAAMC,MAAM,GAAG;AAAEC,QAAAA,GAAG,EAAER,EAAP;AAAWS,QAAAA,OAAO,EAAEH;AAApB,OAAf;AACA,WAAKJ,KAAL,CAAWf,eAAX,CAA2BoB,MAA3B;AACD;;;iCAEYJ,K,EAAO;AAAA,UACVO,IADU,GACD,KAAKR,KADJ,CACVQ,IADU;;AAElB,UAAIP,KAAK,CAACQ,MAAN,CAAa,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,IAAL,KAAcH,IAAI,CAACG,IAAL,CAAUb,EAA5B;AAAA,OAAjB,EAAiDI,MAAjD,GAA0D,CAA9D,EAAiE;AAC/D,eAAO,IAAP;AACD,OAFD,MAEO;AACL,eAAO,KAAP;AACD;AACF;;;6BAEQ;AAAA,wBAC6B,KAAKF,KADlC;AAAA,UACCD,IADD,eACCA,IADD;AAAA,UACOS,IADP,eACOA,IADP;AAAA,UACaI,WADb,eACaA,WADb;AAEP,UAAMR,MAAM,GAAG,KAAKJ,KAAL,CAAWI,MAA1B;;AACA,UAAIS,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB;;AACA,UAAIC,cAAc,GAAGF,MAAM,CAACd,IAAI,CAACiB,IAAN,CAAN,CAAkBC,MAAlB,CAAyB,KAAzB,CAArB;AACA,UAAIC,UAAU,GAAGL,MAAM,CAACd,IAAI,CAACiB,IAAN,CAAN,CAAkBC,MAAlB,CAAyB,IAAzB,CAAjB;AACA,UAAIE,UAAJ;AAEA,UAAIC,eAAJ;;AAEA,UAAIrB,IAAI,CAACsB,QAAL,CAAcnB,MAAd,IAAwB,CAA5B,EAA+B;AAC7BkB,QAAAA,eAAe,GAAG,oBAAC,iBAAD;AAAmB,UAAA,MAAM,EAAErB,IAAI,CAACuB,GAAhC;AAAqC,UAAA,QAAQ,EAAEvB,IAAI,CAACsB,QAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAlB;AACD,OAFD,MAEO;AACLD,QAAAA,eAAe,GAAG,oBAAC,mBAAD;AAAqB,UAAA,MAAM,EAAErB,IAAI,CAACuB,GAAlC;AAAuC,UAAA,QAAQ,EAAEvB,IAAI,CAACsB,QAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAlB;AACD;;AAED,UAAGtB,IAAI,CAACwB,MAAL,KAAgB,EAAnB,EAAsB;AACpBJ,QAAAA,UAAU,GAAG7B,aAAb;AACD,OAFD,MAEM;AACJ6B,QAAAA,UAAU,GAAGpB,IAAI,CAACwB,MAAlB;AACD;;AAED,aACE;AAAK,QAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AACI,QAAA,KAAK,EAAE;AAAEC,UAAAA,KAAK,EAAE,MAAT;AAAiBC,UAAAA,MAAM,EAAE;AAAzB,SADX;AAEI,QAAA,SAAS,EAAC,oDAFd;AAGI,QAAA,GAAG,EAAEN,UAHT;AAII,QAAA,GAAG,EAAC,EAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAOE;AACE,QAAA,KAAK,EAAE;AAAEK,UAAAA,KAAK,EAAE,MAAT;AAAiBC,UAAAA,MAAM,EAAE;AAAzB,SADT;AAEE,QAAA,SAAS,EAAC,0CAFZ;AAGE,QAAA,GAAG,EAAEN,UAHP;AAIE,QAAA,GAAG,EAAC,EAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,EAaE;AAAG,QAAA,SAAS,EAAC,2CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA0DpB,IAAI,CAAC2B,IAA/D,CAbF,CADF,EAgBE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,SAAS,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAuC3B,IAAI,CAAC4B,IAA5C,CADF,EAEE;AAAG,QAAA,SAAS,EAAC,oCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmD5B,IAAI,CAAC4B,IAAxD,CAFF,EAGGf,WAAW,GACV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAM,QAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGb,IAAI,CAACY,IAAL,KAAcH,IAAI,CAACG,IAAL,CAAUb,EAAxB,GACC;AACE,QAAA,OAAO,EAAE,KAAK8B,aAAL,CAAmBhC,IAAnB,CAAwB,IAAxB,EAA8BG,IAAI,CAACuB,GAAnC,CADX;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,SAAS,EAAC,4BAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,GAQG,IATN,OASa,GATb,EAWE,oBAAC,IAAD;AAAM,QAAA,EAAE,kBAAWlB,MAAX,cAAqBL,IAAI,CAACuB,GAA1B,CAAR;AAAyC,QAAA,SAAS,EAAC,2BAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXF,EAcE;AACE,QAAA,OAAO,EAAE,KAAK3B,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,EAA4BG,IAAI,CAACuB,GAAjC,EAAsClB,MAAtC,CADX;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,SAAS,EAAC,2BAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE;AACE,QAAA,SAAS,EAAEtB,UAAU,CAAC,kBAAD,EAAqB,EAArB,CADvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,EASE;AAAM,QAAA,SAAS,EAAC,mBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAqCiB,IAAI,CAACE,KAAL,CAAWC,MAAhD,CATF,CAdF,EAyBE;AACE,QAAA,OAAO,EAAE,KAAK2B,eAAL,CAAqBjC,IAArB,CAA0B,IAA1B,EAAgCG,IAAI,CAACuB,GAArC,CADX;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,SAAS,EAAC,6CAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAzBF,CADA,EAiCG,KAAK9B,KAAL,CAAWC,SAAX,IAAwB2B,eAjC3B,EAkCG,KAAK5B,KAAL,CAAWC,SAAX,IAAwB,oBAAC,uBAAD;AAAyB,QAAA,MAAM,EAAEM,IAAI,CAACuB,GAAtC;AAA2C,QAAA,MAAM,EAAElB,MAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAlC3B,EAmCE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAoEW,cAApE,CAnCF,EAoCE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAoEG,UAApE,CApCF,CADU,GAuCR,IA1CN,CAhBF,CADF,CADF;AAiED;;;;EAlK0BvC,KAAK,CAACmD,S;;AAqKnCvC,cAAc,CAACwC,YAAf,GAA8B;AAC5BnB,EAAAA,WAAW,EAAE;AADe,CAA9B;AAIArB,cAAc,CAACyC,SAAf,GAA2B;AACzBhD,EAAAA,kBAAkB,EAAEJ,SAAS,CAACqD,IAAV,CAAeC,UADV;AAEzBjD,EAAAA,eAAe,EAAEL,SAAS,CAACqD,IAAV,CAAeC,UAFP;AAGzBhD,EAAAA,kBAAkB,EAAEN,SAAS,CAACqD,IAAV,CAAeC,UAHV;AAIzBnC,EAAAA,IAAI,EAAEnB,SAAS,CAACyB,MAAV,CAAiB6B,UAJE;AAKzB1B,EAAAA,IAAI,EAAE5B,SAAS,CAACyB,MAAV,CAAiB6B,UALE;AAMzBC,EAAAA,OAAO,EAAEvD,SAAS,CAACyB,MAAV,CAAiB6B;AAND,CAA3B;;AASA,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAAA5C,KAAK;AAAA,SAAK;AAChCgB,IAAAA,IAAI,EAAEhB,KAAK,CAACgB,IADoB;AAEhC2B,IAAAA,OAAO,EAAE3C,KAAK,CAAC2C;AAFiB,GAAL;AAAA,CAA7B;;AAKA,eAAetD,OAAO,CAACuD,eAAD,EAAkB;AAAEpD,EAAAA,kBAAkB,EAAlBA,kBAAF;AAAsBC,EAAAA,eAAe,EAAfA,eAAtB;AAAuCC,EAAAA,kBAAkB,EAAlBA;AAAvC,CAAlB,CAAP,CACbK,cADa,CAAf","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport { Link } from 'react-router-dom';\nimport { deletePersonalPost, addPersonalLike, removePersonalLike } from '../../../../actions/postActions';\nimport PersonCommentWindow from '../Sub-Components/PersonCommentWindow';\nimport PersonCommentFeed from './PersonCommentFeed';\nimport PersonCommentWindowForm from '../Sub-Components/PersonCommentWindowForm';\nimport defaultAvatar from '../../../../img/defaultAvatar.jpg';\n\nclass PersonPostItem extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      showReply: false,\n      updated: false\n    }\n    this.updateLikes = this.updateLikes.bind(this);\n    this.findUserLike = this.findUserLike.bind(this);\n  }\n\n  updateLikes(id) {\n    const { post } = this.props;\n    if (this.findUserLike(post.likes)) {\n      if (!this.state.updated) {\n        post.likes.length = post.likes.length - 1;\n        this.props.removePersonalLike(id);\n        this.setState(() => {\n          return {\n            updated: false\n          };\n        });\n      } else {\n        this.props.addPersonalLike(id);\n        post.likes.length = post.likes.length + 1;\n        this.setState(() => {\n          return {\n            updated: false\n          };\n        });\n      }\n    }\n    else {\n      if (!this.state.updated) {\n        post.likes.length = post.likes.length + 1;\n        this.props.addPersonalLike(id);\n        this.setState(() => {\n          return {\n            updated: true\n          };\n        });\n      } else {\n        this.props.removePersonalLike(id);\n        post.likes.length = post.likes.length - 1;\n        this.setState(() => {\n          return {\n            updated: false\n          };\n        });\n      }\n    }\n  }\n\n  onCommentsClick() {\n    this.setState({ showReply: !this.state.showReply })\n  }\n\n  onDeleteClick(id) {\n    this.props.deletePersonalPost(id);\n  }\n\n  onLikeClick(id, handle) {\n    const object = { uid: id, uhandle: handle };\n    this.props.addPersonalLike(object);\n  }\n\n  findUserLike(likes) {\n    const { auth } = this.props;\n    if (likes.filter(like => like.user === auth.user.id).length > 0) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    const { post, auth, showActions } = this.props;\n    const handle = this.props.handle;\n    var moment = require('moment');\n    var formatted_date = moment(post.date).format('LLL');\n    var short_date = moment(post.date).format('LT');\n    var postAvatar;\n\n    let commentsContent;\n\n    if (post.comments.length <= 3) {\n      commentsContent = <PersonCommentFeed postId={post._id} comments={post.comments} />;\n    } else {\n      commentsContent = <PersonCommentWindow postId={post._id} comments={post.comments} />;\n    }\n\n    if(post.avatar === ''){\n      postAvatar = defaultAvatar;\n    }else {\n      postAvatar = post.avatar;\n    }\n\n    return (\n      <div className=\"d-flex card card-body mb-3\">\n        <div className=\"row\">\n          <div className=\"col-md-2\">\n          <img\n              style={{ width: '50px', height: '50px' }}\n              className=\"rounded-circle  d-none d-sm-block d-md-none center\"\n              src={postAvatar}\n              alt=\"\"\n            />\n            <img\n              style={{ width: '75px', height: '75px' }}\n              className=\"rounded-circle  d-none d-md-block center\"\n              src={postAvatar}\n              alt=\"\"\n            />\n            <p className=\"d-flex text-center justify-content-center\">{post.name}</p>\n          </div>\n          <div className=\"col-md-10\">\n            <p className=\"lead d-none d-sm-block\">{post.text}</p>\n            <p className=\"lead d-block d-sm-none text-center\">{post.text}</p>\n            {showActions ? (\n              <div>\n              <span className=\"row\">\n                {post.user === auth.user.id ? (\n                  <button\n                    onClick={this.onDeleteClick.bind(this, post._id)}\n                    type=\"button\"\n                    className=\"btn btn-sm btn-danger mr-1\"\n                  >\n                    Delete\n                  </button>\n                ) : null} {\" \"}\n\n                <Link to={`/post/${handle}/${post._id}`} className=\"btn btn-sm btn-light mr-1\">\n                  View\n                </Link>\n                <button\n                  onClick={this.updateLikes.bind(this, post._id, handle)}\n                  type=\"button\"\n                  className=\"btn btn-sm btn-light mr-1\"\n                >\n                  <i\n                    className={classnames('fas fa-thumbs-up', {\n                    })}\n                  />\n                  <span className=\"badge badge-light\">{post.likes.length}</span>\n                </button>\n                <button\n                  onClick={this.onCommentsClick.bind(this, post._id)}\n                  type=\"button\"\n                  className=\"btn btn-sm btn-light mr-1 d-none d-sm-block\">\n                  Comments\n                  </button>\n                  </span>\n                {this.state.showReply && commentsContent}\n                {this.state.showReply && <PersonCommentWindowForm postId={post._id} handle={handle} />}\n                <div className=\"blockquote-footer bottomcorner d-none d-sm-block\" >{formatted_date}</div>\n                <div className=\"blockquote-footer bottomcorner d-block d-sm-none\" >{short_date}</div>\n              </div>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPersonPostItem.defaultProps = {\n  showActions: true\n};\n\nPersonPostItem.propTypes = {\n  deletePersonalPost: PropTypes.func.isRequired,\n  addPersonalLike: PropTypes.func.isRequired,\n  removePersonalLike: PropTypes.func.isRequired,\n  post: PropTypes.object.isRequired,\n  auth: PropTypes.object.isRequired,\n  profile: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  profile: state.profile\n});\n\nexport default connect(mapStateToProps, { deletePersonalPost, addPersonalLike, removePersonalLike })(\n  PersonPostItem\n);\n\n"]},"metadata":{},"sourceType":"module"}